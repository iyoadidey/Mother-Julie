{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mother Julie - Order Menu</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sansita:wght@400;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="{% static 'orders_menu.css' %}" />
</head>
<!-- Leaflet CSS & JS (required for the map) -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<body>
    <div id="root">
        <!-- Topbar -->
        <div class="topbar">
            <div class="topbar-left">
                <div class="location">
                    <span class="pin">üìç</span>
                    <span class="loc-text">Manila</span>
                    <button class="location-search" id="locationSearchBtn">CHANGE</button>
                </div>
            </div>
            
            <div class="topbar-center">
            <img class="title-logo" src="{% static 'orders_menupics/menu.png' %}" alt="All Menu" id="titleLogo">                
            <h1 id="pageTitle">ALL MENU</h1>
</div>
            
            <div class="topbar-right">
                {% if user.is_authenticated %}
                    <div class="user-info">
                        <span class="user-welcome">{{ user.username }}</span>
                        <img src="{% static 'orders_menupics/user-icon.png' %}" alt="User Account" class="user-icon">
                        <form method="POST" action="{% url 'logout' %}" class="logout-form">
                            {% csrf_token %}
                            <button type="submit" class="logout-btn">LOGOUT</button>
                        </form>
                    </div>
                {% else %}
                    <a href="{% url 'signin' %}" class="username">
                        Sign In
                        <img src="{% static 'orders_menupics/user-icon.png' %}" alt="User Account" class="user-icon">
                    </a>
                {% endif %}
            </div>
        </div>

        <!-- Orders Button -->
        <button class="orders-btn" id="ordersButton">
            Orders <span class="orders-count">0</span>
        </button>

        <!-- App Layout -->
        <div class="app">
            <!-- Sidebar -->
            <aside class="sidebar" aria-label="Main navigation">
                <a href="{% url 'dashboard' %}" class="logo-link">
                    <img class="logo" src="{% static 'orders_menupics/motherjulie.png' %}" alt="Mother Julie logo" id="dashboardLogo">
                </a>
                <nav>
                    <ul>
                        <li class="nav-item active" data-target="all">
                            <img class="nav-logo" src="{% static 'orders_menupics/menu.png' %}" alt="All Menu">
                            <span class="nav-label">All Menu</span>
                        </li>
                        <li class="nav-item" data-target="desserts">
                            <img class="nav-logo" src="{% static 'orders_menupics/dessert.png' %}" alt="Desserts">
                            <span class="nav-label">Desserts</span>
                        </li>
                        <li class="nav-item" data-target="spuds">
                            <img class="nav-logo" src="{% static 'orders_menupics/spud.png' %}" alt="Spuds">
                            <span class="nav-label">Spuds</span>
                        </li>
                        <li class="nav-item" data-target="pasta">
                            <img class="nav-logo" src="{% static 'orders_menupics/pasta.png' %}" alt="Pasta / Bread">
                            <span class="nav-label">Pasta / Bread</span>
                        </li>
                        <li class="nav-item" data-target="wrap">
                            <img class="nav-logo" src="{% static 'orders_menupics/wrap.png' %}" alt="Wrap">
                            <span class="nav-label">Wrap</span>
                        </li>
                        <li class="nav-item" data-target="appetizers">
                            <img class="nav-logo" src="{% static 'orders_menupics/appetizer.png' %}" alt="Appetizers">
                            <span class="nav-label">Appetizers</span>
                        </li>
                    </ul>
                </nav>
            </aside>

            <div class="main">
                <!-- ALL MENU Section -->
                <div class="category active" id="all">                    
                    <!-- DESSERTS Category -->
                    <div class="category-section">
                        <h3 class="category-subtitle">DESSERTS</h3>
                        <div class="menu-grid">
                            <!-- Mais Con Yelo -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/mais.png' %}" alt="Mais Con Yelo">
                                <div class="card-body">
                                    <h3>Mais Con Yelo</h3>
                                    <div class="availability">Available</div>
                                    <div class="size-select">
                                        <label><input type="radio" name="mais-size" value="M" checked> M</label>
                                        <label><input type="radio" name="mais-size" value="L"> L</label>
                                    </div>
                                    <div class="price">Php 110 (M) ‚Ä¢ Php 130 (L)</div>
                                </div>
                                <button class="add-to-cart" data-item-id="mais-con-yelo">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>

                            <!-- Biscoff Classic -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/biscoff.png' %}" alt="Biscoff Classic">
                                <div class="card-body">
                                    <h3>Biscoff Classic</h3>
                                    <div class="availability">Available</div>
                                    <div class="size-select">
                                        <label><input type="radio" name="biscoff-size" value="M" checked> M</label>
                                        <label><input type="radio" name="biscoff-size" value="L"> L</label>
                                    </div>
                                    <div class="price">Php 175 (M) ‚Ä¢ Php 200 (L)</div>
                                </div>
                                <button class="add-to-cart" data-item-id="biscoff-classic">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>                           
                            </div>

                            <!-- Buko Pandan -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/buko.png' %}" alt="Buko Pandan">
                                <div class="card-body">
                                    <h3>Buko Pandan</h3>
                                    <div class="availability">Available</div>
                                    <div class="size-select">
                                        <label><input type="radio" name="buko-size" value="M" checked> M</label>
                                        <label><input type="radio" name="buko-size" value="L"> L</label>
                                    </div>
                                    <div class="price">Php 100 (M) ‚Ä¢ Php 120 (L)</div>
                                </div>
                                <button class="add-to-cart" data-item-id="buko-pandan">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>                        
                            </div>

                            <!-- Mango Graham -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/mango_graham.png' %}" alt="Mango Graham">
                                <div class="card-body">
                                    <h3>Mango Graham</h3>
                                    <div class="availability">Available</div>
                                    <div class="size-select">
                                        <label><input type="radio" name="mango-size" value="M" checked> M</label>
                                        <label><input type="radio" name="mango-size" value="L"> L</label>
                                    </div>
                                    <div class="price">Php 150 (M) ‚Ä¢ Php 180 (L)</div>
                                </div>
                                <button class="add-to-cart" data-item-id="mango-graham">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>

                            <!-- Ube Macapuno -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/ube_macapuno.png' %}" alt="Ube Macapuno">
                                <div class="card-body">
                                    <h3>Ube Macapuno</h3>
                                    <div class="availability">Available</div>
                                    <div class="size-select">
                                        <label><input type="radio" name="ube-size" value="M" checked> M</label>
                                        <label><input type="radio" name="ube-size" value="L"> L</label>
                                    </div>
                                    <div class="price">Php 130 (M) ‚Ä¢ Php 160 (L)</div>
                                </div>
                                <button class="add-to-cart" data-item-id="ube-macapuno">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>

                            <!-- Rocky Road -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/rocky_road.png' %}" alt="Rocky Road">
                                <div class="card-body">
                                    <h3>Rocky Road</h3>
                                    <div class="availability">Available</div>
                                    <div class="size-select">
                                        <label><input type="radio" name="rocky-size" value="M" checked> M</label>
                                        <label><input type="radio" name="rocky-size" value="L"> L</label>
                                    </div>
                                    <div class="price">Php 140 (M) ‚Ä¢ Php 170 (L)</div>
                                </div>
                                <button class="add-to-cart" data-item-id="rocky-road">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>

                            <!-- Coffee Jelly -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/coffee_jelly.png' %}" alt="Coffee Jelly">
                                <div class="card-body">
                                    <h3>Coffee Jelly</h3>
                                    <div class="availability">Available</div>
                                    <div class="size-select">
                                        <label><input type="radio" name="coffee-size" value="M" checked> M</label>
                                        <label><input type="radio" name="coffee-size" value="L"> L</label>
                                    </div>
                                    <div class="price">Php 115 (M) ‚Ä¢ Php 140 (L)</div>
                                </div>
                                <button class="add-to-cart" data-item-id="coffee-jelly">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>

                            <!-- Cookie Monster -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/cookie_monster.png' %}" alt="Cookie Monster">
                                <div class="card-body">
                                    <h3>Cookie Monster</h3>
                                    <div class="availability">Available</div>
                                    <div class="size-select">
                                        <label><input type="radio" name="cookie-size" value="M" checked> M</label>
                                        <label><input type="radio" name="cookie-size" value="L"> L</label>
                                    </div>
                                    <div class="price">Php 160 (M) ‚Ä¢ Php 190 (L)</div>
                                </div>
                                <button class="add-to-cart" data-item-id="cookie-monster">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>

                            <!-- Dulce de Leche -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/dulce_de_leche.png' %}" alt="Dulce de Leche">
                                <div class="card-body">
                                    <h3>Dulce de Leche</h3>
                                    <div class="availability">Available</div>
                                    <div class="size-select">
                                        <label><input type="radio" name="dulce-size" value="M" checked> M</label>
                                        <label><input type="radio" name="dulce-size" value="L"> L</label>
                                    </div>
                                    <div class="price">Php 160 (M) ‚Ä¢ Php 190 (L)</div>
                                </div>
                                <button class="add-to-cart" data-item-id="dulce-de-leche">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>

                            <!-- Choco-Peanut Banana -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/choco_peanut_banana.png' %}" alt="Choco-Peanut Banana">
                                <div class="card-body">
                                    <h3>Choco-Peanut Banana</h3>
                                    <div class="availability">Available</div>
                                    <div class="size-select">
                                        <label><input type="radio" name="choco-size" value="M" checked> M</label>
                                        <label><input type="radio" name="choco-size" value="L"> L</label>
                                    </div>
                                    <div class="price">Php 160 (M) ‚Ä¢ Php 190 (L)</div>
                                </div>
                                <button class="add-to-cart" data-item-id="choco-peanut-banana">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- SPUDS Category -->
                    <div class="category-section">
                        <h3 class="category-subtitle">SPUDS</h3>
                        <div class="menu-grid">
                            <!-- Cheesy Bacon -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/cheesy_bacon.png' %}" alt="Cheesy Bacon">
                                <div class="card-body">
                                    <h3>Cheesy Bacon</h3>
                                    <div class="availability">Available</div>
                                    <div class="price">Php 159</div>
                                </div>
                                <button class="add-to-cart" data-item-id="cheesy-bacon"> <!-- FIXED: consistent naming -->
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>                            
                            </div>

                            <!-- Chili Con Carne -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/chili_con_carne.png' %}" alt="Chili Con Carne">
                                <div class="card-body">
                                    <h3>Chili Con Carne</h3>
                                    <div class="availability">Available</div>
                                    <div class="price">Php 179</div>
                                </div>
                                <button class="add-to-cart" data-item-id="chili-con-carne"> <!-- FIXED: consistent naming -->
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>                            
                            </div>

                            <!-- Triple Cheese -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/triple_cheese.png' %}" alt="Triple Cheese">
                                <div class="card-body">
                                    <h3>Triple Cheese</h3>
                                    <div class="availability">Available</div>
                                    <div class="price">Php 179</div>
                                </div>
                                <button class="add-to-cart" data-item-id="triple-cheese"> <!-- FIXED: consistent naming -->
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>                            
                            </div>

                            <!-- Lasagna Jacket -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/lasagna_jacket.png' %}" alt="Lasagna Jacket">
                                <div class="card-body">
                                    <h3>Lasagna Jacket</h3>
                                    <div class="availability">Available</div>
                                    <div class="price">Php 129</div>
                                </div>
                                <button class="add-to-cart" data-item-id="lasagna-jacket">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>                            
                            </div>
                        </div>
                    </div>

                    <!-- BREAD Category -->
                    <div class="category-section">
                        <h3 class="category-subtitle">PASTA/BREAD</h3>
                        <div class="menu-grid">
                            <!-- Lasagna -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/lasagna.png' %}" alt="Lasagna">
                                <div class="card-body">
                                    <h3>Lasagna</h3>
                                    <div class="availability">Available</div>
                                    <div class="price">Php 250</div>
                                </div>
                                <button class="add-to-cart" data-item-id="lasagna">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>

                            <!-- Garlic Bread -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/garlic_bread.png' %}" alt="Garlic Bread">
                                <div class="card-body">
                                    <h3>Garlic Bread</h3>
                                    <div class="availability">Available</div>
                                    <div class="price">Php 69</div>
                                </div>
                                <button class="add-to-cart" data-item-id="garlic-bread">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- WRAP Category -->
                    <div class="category-section">
                        <h3 class="category-subtitle">WRAP</h3>
                        <div class="menu-grid">
                            <!-- Chicken Wrap -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/hongar_chicken_wrap.png' %}" alt="Chicken Wrap">
                                <div class="card-body">
                                    <h3>Chicken Wrap</h3>
                                    <div class="availability">Available</div>
                                    <div class="price">Php 169</div>
                                </div>
                                <button class="add-to-cart" data-item-id="chicken-wrap">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>

                            <!-- Beef Wrap -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/beef_wrap.png' %}" alt="Beef Wrap">
                                <div class="card-body">
                                    <h3>Beef Wrap</h3>
                                    <div class="availability">Available</div>
                                    <div class="price">Php 139</div>
                                </div>
                                <button class="add-to-cart" data-item-id="beef-wrap">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>

                            <!-- Kesodilla -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/kesodilla.png' %}" alt="Kesodilla">
                                <div class="card-body">
                                    <h3>Kesodilla</h3>
                                    <div class="availability">Available</div>
                                    <div class="price">Php 99</div>
                                </div>
                                <button class="add-to-cart" data-item-id="kesodilla">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- APPETIZERS Category -->
                    <div class="category-section">
                        <h3 class="category-subtitle">APPETIZERS</h3>
                        <div class="menu-grid">
                            <!-- Chicken Poppers -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/chicken_poppers.png' %}" alt="Chicken Poppers">
                                <div class="card-body">
                                    <h3>Chicken Poppers</h3>
                                    <div class="availability">Available</div>
                                    <div class="price">Php 149</div>
                                </div>
                                <button class="add-to-cart" data-item-id="chicken-poppers">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>

                            <!-- Nachos -->
                            <div class="card">
                                <img src="{% static 'orders_menupics/nachos.png' %}" alt="Nachos">
                                <div class="card-body">
                                    <h3>Nachos</h3>
                                    <div class="availability">Available</div>
                                    <div class="price">Php 129</div>
                                </div>
                                <button class="add-to-cart" data-item-id="nachos">
                                    <img src="{% static 'orders_menupics/addtocart.png' %}" alt="Add to Cart" class="cart-icon">
                                </button>
                            </div>
                        </div>
                    </div> <!-- FIXED: Added missing closing div -->
                </div>

                <!-- Individual Category Sections (Hidden by default) -->
                <div class="category" id="desserts">
                    <h3 class="section-title">DESSERTS</h3>
                    <div class="menu-grid" id="dessertsCategoryGrid"></div>
                </div>

                <div class="category" id="spuds">
                    <h3 class="section-title">SPUDS</h3>
                    <div class="menu-grid" id="spudsCategoryGrid"></div>
                </div>

                <div class="category" id="pasta">
                    <h3 class="section-title">PASTA / BREAD</h3>
                    <div class="menu-grid" id="pastaCategoryGrid"></div>
                </div>

                <div class="category" id="wrap">
                    <h3 class="section-title">WRAP</h3>
                    <div class="menu-grid" id="wrapCategoryGrid"></div>
                </div>

                <div class="category" id="appetizers">
                    <h3 class="section-title">APPETIZERS</h3>
                    <div class="menu-grid" id="appetizersCategoryGrid"></div>
                </div>
            </div>
        </div>

        <!-- Location Modal -->
<div class="location-modal" id="locationModal">
    <div class="modal-content">
        <div class="modal-header">
            <div>
                <h3>Set Your Location</h3>
                <div class="modal-subtitle">Metro Manila Only</div>
            </div>
            <button class="modal-close" id="modalClose">&times;</button>
        </div>
        
        <div class="search-box">
            <input type="text" id="locationInput" placeholder="Search for your exact address...">
            <button class="search-btn" id="searchBtn">Search</button>
        </div>
        
        <div class="suggestions" id="suggestions"></div>

        <!-- Selected Location Display -->
        <div class="selected-location" id="selectedLocationDisplay">
            <!-- This will be populated dynamically -->
        </div>

        <!-- Map Container -->
        <div class="map-container" id="mapContainer">
            <div id="map"></div>
            <div class="map-instructions">
                <p>üìç Click anywhere on the map to set your exact location</p>
            </div>
        </div>

        <div class="location-actions">
            <button class="current-location-btn" id="currentLocationBtn">
                üìç Use Current Location
            </button>
            <button class="show-map-btn" id="showMapBtn">
                üó∫Ô∏è Show Map
            </button>
        </div>

        <div class="location-error" id="locationError">
            <!-- Error messages will appear here -->
        </div>

        <div class="confirmation-buttons">
            <button class="confirm-location" id="confirmLocationBtn" disabled>
                ‚úÖ Confirm Location
            </button>
            <button class="cancel-location" id="cancelLocationBtn">
                ‚ùå Cancel
            </button>
        </div>
    </div>
</div>

        <!-- Billing Panel -->
        <div class="billing-panel" id="billingPanel">
            <div class="billing-header">
                <h2>Your Order</h2>
                <button class="billing-close" id="billingClose">‚úï</button>
            </div>
            
            <div class="billing-items" id="billingItems">
                <div class="empty-cart-message">
                    <div class="empty-icon">üõí</div>
                    <p>No items in cart</p>
                    <small>Add some delicious items to get started!</small>
                </div>
            </div>
            
            <div class="billing-summary">
                <div class="summary-row">
                    <span>Subtotal:</span>
                    <span class="subtotal" id="subtotalAmount">Php 0.00</span>
                </div>
                <div class="summary-row delivery-fee-row" style="display: none;">
                    <span>Delivery Fee:</span>
                    <span class="delivery-charge" id="deliveryFee">Php 50.00</span>
                </div>
                <div class="summary-row total-row">
                    <span>Total:</span>
                    <span class="total" id="totalAmount">Php 0.00</span>
                </div>
            </div>
            
            <div class="order-type">
                <button class="order-btn active" data-type="dine-in">Dine-in</button>
                <button class="order-btn" data-type="pickup">Pickup</button>
                <button class="order-btn" data-type="delivery">Delivery</button>
            </div>
            
            <!-- Payment Method Section -->
            <div class="payment-method">
                <h3>Payment Method</h3>
                <div class="payment-options">
                    <button class="payment-btn cash active" data-method="cash">
                        <span class="payment-icon">üíµ</span>
                        <span>Cash</span>
                    </button>
                    <button class="payment-btn gcash" data-method="gcash">
                        <span class="payment-icon">üì±</span>
                        <span>GCash</span>
                    </button>
                    <button class="payment-btn bank" data-method="bank">
                        <span class="payment-icon">üè¶</span>
                        <span>Bank Transfer</span>
                    </button>
                </div>
                
                <!-- Payment Details -->
                <div class="payment-details">
                    <!-- Cash Payment Note -->
                    <div class="payment-note cash-note active">
                        Pay with cash at the counter
                    </div>
                    
                    <!-- GCash Payment Form -->
                    <div class="payment-form gcash-form">
                        <h4>GCash Payment</h4>
                        <div class="form-group">
                            <label for="gcashNumber">GCash Mobile Number</label>
                            <input type="tel" id="gcashNumber" placeholder="09XX XXX XXXX" maxlength="11">
                        </div>
                        <div class="form-group">
                            <label for="gcashName">Account Holder Name</label>
                            <input type="text" id="gcashName" placeholder="Enter full name">
                        </div>
                        <div class="gcash-qr">
                            <div class="qr-placeholder">
                                <div class="qr-code">üì±</div>
                                <p>Scan to Pay with GCash</p>
                                <small>Amount: <span id="gcashAmount">Php 0.00</span></small>
                            </div>
                        </div>
                        <button class="verify-payment" id="verifyGCash">Verify Payment</button>
                    </div>
                    
                    <!-- Bank Transfer Form -->
                    <div class="payment-form bank-form">
                        <h4>Bank Transfer</h4>
                        <div class="bank-options">
                            <div class="bank-option active" data-bank="bpi">
                                <span class="bank-icon">üè¶</span>
                                <span>BPI</span>
                            </div>
                            <div class="bank-option" data-bank="bdo">
                                <span class="bank-icon">üè¶</span>
                                <span>BDO</span>
                            </div>
                            <div class="bank-option" data-bank="metrobank">
                                <span class="bank-icon">üè¶</span>
                                <span>Metrobank</span>
                            </div>
                        </div>
                        
                        <div class="bank-details">
                            <div class="bank-info active" data-bank="bpi">
                                <h5>BPI Account Details</h5>
                                <p><strong>Account Name:</strong> Mother Julie Food Hub</p>
                                <p><strong>Account Number:</strong> 1234 5678 9012</p>
                                <p><strong>Branch:</strong> Makati Main</p>
                            </div>
                            <div class="bank-info" data-bank="bdo">
                                <h5>BDO Account Details</h5>
                                <p><strong>Account Name:</strong> Mother Julie Food Hub</p>
                                <p><strong>Account Number:</strong> 0987 6543 2109</p>
                                <p><strong>Branch:</strong> Greenbelt</p>
                            </div>
                            <div class="bank-info" data-bank="metrobank">
                                <h5>Metrobank Account Details</h5>
                                <p><strong>Account Name:</strong> Mother Julie Food Hub</p>
                                <p><strong>Account Number:</strong> 5678 9012 3456</p>
                                <p><strong>Branch:</strong> Ayala Center</p>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="referenceNumber">Reference Number</label>
                            <input type="text" id="referenceNumber" placeholder="Enter transaction reference">
                        </div>
                        <div class="form-group">
                            <label for="senderName">Sender Name</label>
                            <input type="text" id="senderName" placeholder="Enter your name as in bank account">
                        </div>
                        <button class="verify-payment" id="verifyBank">Verify Payment</button>
                    </div>
                </div>
            </div>

            <!-- PLACE ORDER BUTTON -->
            <button class="process-order">Place Order</button>
        </div>

        <!-- Toast Container -->
        <div id="toastContainer" style="display: none;"></div>

        <!-- Order Success Modal -->
        <div id="orderSuccessModal" class="order-success-modal">
            <div class="success-content">
                <div class="success-icon">‚úì</div>
                <h3>Order Placed Successfully!</h3>
                <div class="order-details">
                    <p><strong>Order Type:</strong> <span id="successOrderType"></span></p>
                    <p><strong>Total:</strong> <span id="successTotal"></span></p>
                </div>
                <p class="thank-you">Thank you for your order!</p>
                <button class="close-success-btn" id="closeSuccessBtn">Continue Shopping</button>
            </div>
        </div>
    </div>

    <script>
        const STATIC_URLS = {
            menu: "{% static 'orders_menupics/menu.png' %}",
            dessert: "{% static 'orders_menupics/dessert.png' %}",
            spud: "{% static 'orders_menupics/spud.png' %}",
            pasta: "{% static 'orders_menupics/pasta.png' %}",
            wrap: "{% static 'orders_menupics/wrap.png' %}",
            appetizer: "{% static 'orders_menupics/appetizer.png' %}",
            addToCart: "{% static 'orders_menupics/addtocart.png' %}",
            
            // Desserts
            maisConYelo: "{% static 'orders_menupics/mais.png' %}",
            biscoffClassic: "{% static 'orders_menupics/biscoff.png' %}",
            bukoPandan: "{% static 'orders_menupics/buko.png' %}",
            mangoGraham: "{% static 'orders_menupics/mango_graham.png' %}",
            ubeMacapuno: "{% static 'orders_menupics/ube_macapuno.png' %}",
            rockyRoad: "{% static 'orders_menupics/rocky_road.png' %}",
            coffeeJelly: "{% static 'orders_menupics/coffee_jelly.png' %}",
            cookieMonster: "{% static 'orders_menupics/cookie_monster.png' %}",
            dulce_de_Leche: "{% static 'orders_menupics/dulce_de_leche.png' %}",
            choco_peanut_Banana: "{% static 'orders_menupics/choco_peanut_banana.png' %}",

            // Spuds
            cheesyBacon: "{% static 'orders_menupics/cheesy_bacon.png' %}",
            chiliConCarne: "{% static 'orders_menupics/chili_con_carne.png' %}",
            tripleCheese: "{% static 'orders_menupics/triple_cheese.png' %}",
            lasagnaJacket: "{% static 'orders_menupics/lasagna_jacket.png' %}",
            
            // Pasta/Bread
            lasagna: "{% static 'orders_menupics/lasagna.png' %}",
            garlicBread: "{% static 'orders_menupics/garlic_bread.png' %}",
            
            // Wrap
            chickenWrap: "{% static 'orders_menupics/hongar_chicken_wrap.png' %}",
            beefWrap: "{% static 'orders_menupics/beef_wrap.png' %}",
            kesodilla: "{% static 'orders_menupics/kesodilla.png' %}",
            
            // Appetizers
            chickenPoppers: "{% static 'orders_menupics/chicken_poppers.png' %}",
            nachos: "{% static 'orders_menupics/nachos.png' %}"
        };
    </script>

    <!-- Include shared data library first, then orders menu -->
    <script src="{% static 'shared_data.js' %}"></script>
    <script src="{% static 'orders_menu.js' %}"></script>

    {# Backend-controlled visibility: hide cards not in visible_product_names #}
    {{ visible_product_names|json_script:"visible-products" }}
    <script>
        (function(){
            try {
                //var visible = JSON.parse(document.getElementById('visible-products').textContent);
                //var allowed = new Set(visible);
                //document.querySelectorAll('.card .card-body h3').forEach(function(title){
                    //var name = (title.textContent || '').trim();
                    //if (!allowed.has(name)) {
                        //var card = title.closest('.card');
                        //if (card) {
                            //card.style.display = 'none';
                        //}
                    //}
                //});
            } catch (e) {
                console.error('Failed to apply product visibility from backend:', e);
            }
        })();
    </script>
</body>
</html>